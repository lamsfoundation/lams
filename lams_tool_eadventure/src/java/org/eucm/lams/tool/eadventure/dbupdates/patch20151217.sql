-- Turn off autocommit, so nothing is committed if there is an error
SET AUTOCOMMIT = 0;
SET FOREIGN_KEY_CHECKS=0;
----------------------Put all sql statements below here-------------------------

-- LDEV-3640 Add necessary cascades
ALTER IGNORE TABLE tl_eueadv10_condition DROP FOREIGN KEY FK_NEW_1226715514_5656683026352999;
ALTER TABLE tl_eueadv10_condition ADD CONSTRAINT FK_NEW_1226715514_5656683026352999 FOREIGN KEY (`eadventure_uid`)
REFERENCES `tl_eueadv10_eadventure` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;


ALTER IGNORE TABLE tl_eueadv10_condition_expression DROP FOREIGN KEY FK_NEW_1226715514_5656683026352390;
ALTER TABLE tl_eueadv10_condition_expression ADD CONSTRAINT FK_NEW_1226715514_5656683026352390 FOREIGN KEY (`condition_uid`)
REFERENCES `tl_eueadv10_condition` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER IGNORE TABLE tl_eueadv10_condition_expression DROP FOREIGN KEY FK_NEW_1226715514_5656683026352EEE;
ALTER TABLE tl_eueadv10_condition_expression ADD CONSTRAINT FK_NEW_1226715514_5656683026352EEE FOREIGN KEY (`first_op`)
REFERENCES `tl_eueadv10_param` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER IGNORE TABLE tl_eueadv10_condition_expression DROP FOREIGN KEY FK_NEW_1226715514_5656683026352FFF;
ALTER TABLE tl_eueadv10_condition_expression ADD CONSTRAINT FK_NEW_1226715514_5656683026352FFF FOREIGN KEY (`var_introduced`)
REFERENCES `tl_eueadv10_param` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;


ALTER IGNORE TABLE tl_eueadv10_eadventure DROP FOREIGN KEY FK_NEW_1226715514_89093BF758092FB;
ALTER TABLE tl_eueadv10_eadventure ADD CONSTRAINT FK_NEW_1226715514_89093BF758092FB FOREIGN KEY (`create_by`)
REFERENCES `tl_eueadv10_user` (`uid`) ON DELETE SET NULL ON UPDATE CASCADE;


ALTER IGNORE TABLE tl_eueadv10_item_log DROP FOREIGN KEY FK_NEW_1226715514_693580A438BF8DFE;
ALTER TABLE tl_eueadv10_item_log ADD CONSTRAINT FK_NEW_1226715514_693580A438BF8DFE FOREIGN KEY (`eadventure_item_uid`)
REFERENCES `tl_eueadv10_eadventure` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER IGNORE TABLE tl_eueadv10_item_log DROP FOREIGN KEY FK_NEW_1226715514_693580A441F9365D;
ALTER TABLE tl_eueadv10_item_log ADD CONSTRAINT FK_NEW_1226715514_693580A441F9365D FOREIGN KEY (`user_uid`)
REFERENCES `tl_eueadv10_user` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;


ALTER IGNORE TABLE tl_eueadv10_param DROP FOREIGN KEY FK_NEW_1226715514_56566830263527E3;
ALTER TABLE tl_eueadv10_param ADD CONSTRAINT FK_NEW_1226715514_56566830263527E3 FOREIGN KEY (`eadventure_uid`)
REFERENCES `tl_eueadv10_eadventure` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;


ALTER IGNORE TABLE tl_eueadv10_session DROP FOREIGN KEY FK_NEW_1226715514_24AA78C530E79035;
ALTER TABLE tl_eueadv10_session ADD CONSTRAINT FK_NEW_1226715514_24AA78C530E79035 FOREIGN KEY (`eadventure_uid`)
REFERENCES `tl_eueadv10_eadventure` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;


ALTER IGNORE TABLE tl_eueadv10_user DROP FOREIGN KEY FK_NEW_1226715514_30113BFC309ED320;
ALTER TABLE tl_eueadv10_user ADD CONSTRAINT FK_NEW_1226715514_30113BFC309ED320 FOREIGN KEY (`eadventure_uid`)
REFERENCES `tl_eueadv10_eadventure` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER IGNORE TABLE tl_eueadv10_user DROP FOREIGN KEY FK_NEW_1226715514_30113BFCEC0D3147;
ALTER TABLE tl_eueadv10_user ADD CONSTRAINT FK_NEW_1226715514_30113BFCEC0D3147 FOREIGN KEY (`session_uid`)
REFERENCES `tl_eueadv10_session` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;


ALTER IGNORE TABLE tl_eueadv10_var DROP FOREIGN KEY FK_NEW_1226715514_42637763767637E6;
ALTER TABLE tl_eueadv10_var ADD CONSTRAINT FK_NEW_1226715514_42637763767637E6 FOREIGN KEY (`visit_log_uid`)
REFERENCES `tl_eueadv10_item_log` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE;
 						  
----------------------Put all sql statements above here-------------------------

-- If there were no errors, commit and restore autocommit to on
COMMIT;
SET AUTOCOMMIT = 1;
SET FOREIGN_KEY_CHECKS=1;